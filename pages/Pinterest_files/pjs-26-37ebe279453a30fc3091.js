webpackJsonp([26],{"7Dxt":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=Object(m.a)(e),n=function(e){function n(){var t,i,a;r(this,n);for(var s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];return t=i=o(this,e.call.apply(e,[this].concat(c))),i.state={impressionStarted:!1,impressionLogged:!1},i.currentNs=function(){return Date.now()*g},i.startTime=0,i.debugPinImpressions=v&&"Pin"===i.props.impressionType&&i.props.viewer.isEmployee,i.handleVisibilityChanged=function(e){var t=i.props,n=t.componentType,r=t.contextLog,o=t.contextLogData,a=t.impressionAuxFields,s=t.impressionType,c=t.loggingId,p=t.slotIndex,l=t.viewParameter,u=t.viewType,d=t.viewData;if(e)i.startTime=i.currentNs(),i.debugPinImpressions&&(console.log(p+" started timer"),i.setState({impressionStarted:!0}));else{var m,h,f=b[s],y=f.idType,v=i.currentNs(),g=Object.assign((m={endTime:v},m[y]=c,m.slotIndex=p,m.time=i.startTime,m.renderDuration=v-i.startTime,m),a);r(f.eventType,Object.assign({component:n,eventData:(h={},h[f.impressionType]=[g],h),view:u,viewParameter:l,viewData:d},o)),i.debugPinImpressions&&(console.log(p+" logged for "+(v-i.startTime)/1e9+"s"),i.setState({impressionStarted:!1,impressionLogged:!0}))}},a=t,o(i,a)}return i(n,e),n.prototype.render=function e(){return s.createElement(t,Object.assign({onVisibilityChanged:this.handleVisibilityChanged,debugImpressionStarted:this.debugPinImpressions?this.state.impressionStarted:void 0,debugImpressionLogged:this.debugPinImpressions?this.state.impressionLogged:void 0},this.props))},n}(s.Component);return Object(h.compose)(y.a,d.a)(n)}t.a=a;var s=n("d6ZO"),c=n.n(s),p=n("IaRT"),l=n.n(p),u=n("FJZF"),d=n("i0Ug"),m=n("sHx0"),h=n("MQ2h"),f=n.n(h),y=n("Kqaz"),v=u.a.getQueryStringParams()&&u.a.getQueryStringParams().debug_impression_log,b={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110}},g=1e6},RvAN:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n("d6ZO"),s=n.n(a),c=n("GGB8"),p=n.n(c),l=n("W/Cr"),u=n("IaRT"),d=n.n(u),m=n("WBZ1"),h=n.n(m),f=n("gEaE"),y=n("7IpV"),v={UP:"up",DOWN:"down"},b=100,g=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];return n=i=o(this,e.call.apply(e,[this].concat(c))),i.handleScroll=h()(function(){if(!i.props.isFetching){var e=i.props.scrollThreshold;Object(y.c)(i._container)-Object(y.d)(i._container)-Object(y.a)(i._container)<e&&i.fetchMore()}},b),i.addEventListeners=function(e){var t=i.props.useWindow;t&&(e=window),i.removeEventListeners(),e&&(t||e.addEventListener("wheel",i.preventScroll),e.addEventListener("scroll",i.handleScroll)),i._container=e},i.preventScroll=function(e){var t=e.deltaY<0?v.UP:v.DOWN,n=i._container.scrollHeight-i._container.scrollTop-i._container.clientHeight==0,r=0===i._container.scrollTop;(t===v.DOWN&&n||t===v.UP&&r)&&e.preventDefault()},a=n,o(i,a)}return i(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function e(t){var n=t.data,r=t.onDataFetched;n&&r(n.length)},t.prototype.componentWillUnmount=function e(){this.removeEventListeners()},t.prototype.removeEventListeners=function e(){var t=this.props.useWindow;this._container&&(t||this._container.removeEventListener("wheel",this.preventScroll),this._container.removeEventListener("scroll",this.handleScroll))},t.prototype.fetchMore=function e(){this.props.isFetching||(this.props.isAtEnd?this._container.removeEventListener("scroll",this.handleScroll):this.props.fetchMoreData())},t.prototype.render=function e(){var t=this.props,n=t.className,r=t.data,o=t.isFetching,i=t.renderEmptyState,a=t.renderItem;return!o&&r&&0===r.length?i():s.a.createElement("div",{className:p()(n,"listContainer"),ref:this.addEventListeners},this.props.data?s.a.createElement("ul",{className:"scrollableList"},this.props.data.map(function(e,t){return a(e,t)})):null,this.props.isAtEnd?null:s.a.createElement("div",{className:"loadingItem"},s.a.createElement(f.F,{accessibilityLabel:l.a._("Loading items"),show:this.props.isFetching})))},t}(a.Component);g.defaultProps={data:[],onDataFetched:function e(){},scrollThreshold:400,useWindow:!1},t.a=g},wygQ:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=n("d6ZO"),l=n.n(p),u=n("SnoN"),d=n("GGB8"),m=n.n(d),h=n("IaRT"),f=n.n(h),y={ONE:1,TWO:2,END:3},v=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];return n=i=o(this,e.call.apply(e,[this].concat(c))),i.state={educationStep:y.ONE},i.toStepTwo=function(){i.setState({educationStep:y.TWO})},i.dismissEducation=function(){var e=i.props.handleDismiss;i.setState({educationStep:y.END}),e()},a=n,o(i,a)}return i(t,e),t.prototype.componentDidMount=function e(){var t=this,n=this.props.stepDelay;this.educationStepTimer=setTimeout(function(){t.state.educationStep<y.TWO&&t.setState({educationStep:y.TWO})},n)},t.prototype.componentWillUnmount=function e(){clearTimeout(this.educationStepTimer)},t.prototype.renderPill=function e(t,n,r){return l.a.createElement("button",{onClick:r,className:m()("educationPill","slideIn",{fadeOut:n})},l.a.createElement("div",{className:"message"},t))},t.prototype.render=function e(){var t=this.state.educationStep,n=this.props,r=n.titleText,o=n.titleText2,i=this.renderPill(r,t===y.TWO,this.toStepTwo),a=this.renderPill(o,t===y.END,this.dismissEducation);return l.a.createElement("div",{className:"newsHubEducation"},l.a.createElement("div",{className:"educationStep stepOne"},(t===y.ONE||t===y.TWO)&&i),l.a.createElement("div",{className:"educationStep stepTwo bottom"},(t===y.TWO||t===y.END)&&a))},t}(p.Component),b=n("W/Cr"),g=n("zFaW"),T=n("7Dxt"),w=Object(T.a)(g.a),E=n("mnfW"),_=n("RvAN"),O=n("nX0T"),I=n("mHth"),S=n("YZkw"),x=n("pN+K"),D=n("MQ2h"),N=n.n(D),C=n("Kqaz"),P=n("gEaE"),j=4,W=864e5,L=Object(x.b)({name:"NewsHubResource",options:{page_size:10}},{allowStale:!1})(_.a),F=function(e){function t(n){a(this,t);var r=s(this,e.call(this,n));return r.state={shouldEducate:!1},r.onDataFetched=function(e){r.props.experience&&e>j&&!r.state.shouldEducate&&r.setState({shouldEducate:!0})},r.handleItemClick=function(){r.handleComplete(),r.props.handleItemClick()},r.handleComplete=function(){var e=r.props,t=e.experienceClient,n=e.experience;n&&t.completeExperience(n.placement_id,n.experience_id)},r.handleDismiss=function(){var e=r.props,t=e.experienceClient,n=e.experience;n&&t.dismissExperience(n.placement_id,n.experience_id)},r.renderItem=function(e,t){var n={impressionAuxFields:{newsType:e.news_type},impressionType:"News",loggingId:e.id,slotIndex:t,viewParameter:3081,viewType:107};return l.a.createElement("li",{className:"newsHubItemWrapper",key:t},r.renderDate(e.last_updated_at,t),l.a.createElement(w,Object.assign({contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:r.handleItemClick,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerText:e.header_text,id:e.id,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,subHeaderText:e.sub_header_text,siteType:r.props.siteType,textMapping:e.text_mapping,type:e.news_type,unread:e.unread},n)))},r.renderEmptyState=function(){return l.a.createElement(P.b,{height:400},l.a.createElement(P.b,{display:"flex",justifyContent:"center",color:"darkGray",shape:"pill",paddingY:5,margin:5},l.a.createElement(P.g,{xs:10},l.a.createElement(P.J,{bold:!0,color:"white",size:"lg"},b.a._("New! Discover ideas from your friends, followers and people who love your Pins!")))))},r.currentDay=null,r.today=new Date,r.today.setHours(0,0,0,0),r}return c(t,e),t.prototype.getChildContext=function e(){return{preloadingSupported:!0}},t.prototype.componentDidMount=function e(){var t=this.props,n=t.experience,r=t.experienceClient;n&&r.viewExperience(n.placement_id,n.experience_id),this.logPanelImpression()},t.prototype.shouldComponentUpdate=function e(t,n){if(this.state.shouldEducate===n.shouldEducate){var r=this.props.experience,o=t.experience;return(r||{}).id!==(o||{}).id}return!0},t.prototype.getEducation=function e(){var t=this.props.experience;if(this.state.shouldEducate&&t){var n=t.display_data,r=n.step_delay,o=n.title_text,i=n.title_text_2;return l.a.createElement(v,{handleDismiss:this.handleDismiss,stepDelay:r,titleText:o,titleText2:i})}return null},t.prototype.logPanelImpression=function e(){var t=this.props.contextLog,n=u.a.getInstance(),r=n.getViewFromContext();t(13,{view:107,viewParameter:3081}),n.addViewToContext(r)},t.prototype.renderDate=function e(t,n){var r=new Date(t);if(r.setHours(0,0,0,0),0!==n&&null!==this.currentDay&&void 0!==this.currentDay){var o=this.currentDay;if(r.getTime()===o.getTime())return null}this.currentDay=r;var i=void 0;return i=r.getTime()===this.today.getTime()?b.a._("Today"):r.getTime()===new Date(this.today-864e5).getTime()?b.a._("Yesterday"):r&&r>=new Date(this.today-5184e5)?b.a.getHumanizedTimesince(r.toString()):E.b.formatDate(this.props.locale,r,E.b.DateFormatType.MONTH_DAY,!1),l.a.createElement("div",{className:"newsHubItemDate"},l.a.createElement(P.J,{bold:!0,size:"xl"},i))},t.prototype.render=function e(){return l.a.createElement(O.a,{view:107,viewParameter:3081},l.a.createElement("div",null,this.getEducation(),l.a.createElement(L,{className:"newsHubPanel",onDataFetched:this.onDataFetched,renderEmptyState:this.renderEmptyState,renderItem:this.renderItem})))},t}(p.Component);F.childContextTypes={preloadingSupported:f.a.bool.isRequired},F.defaultProps={handleItemClick:function e(){}};var H=t.a=Object(D.compose)(Object(S.a)(1000035),C.a,I.a)(F)},ybIz:function(e,t,n){"use strict";function r(e){var t=e.handleItemClick,n=e.locale,r=e.siteType;return i.a.createElement("div",{className:"NewsConversationsDropdown"},i.a.createElement("div",{className:"content"},i.a.createElement(a.a,{handleItemClick:t,locale:n,siteType:r})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n("d6ZO"),i=n.n(o),a=n("wygQ"),s=n("IaRT"),c=n.n(s)}});